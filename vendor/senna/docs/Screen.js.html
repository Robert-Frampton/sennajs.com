<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: screen/Screen.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: screen/Screen.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code><span class="hljs-string">'use strict'</span>;

(function() {
  <span class="hljs-javadoc">/**
   * Screen class is a special type of route handler that provides helper
   * utilities that adds lifecycle and methods to provide content to each
   * registered surface.
   * <span class="hljs-javadoctag">@constructor</span>
   * <span class="hljs-javadoctag">@extends</span> {senna.Cacheable}
   */</span>
  senna.Screen = function() {
    senna.Screen.base(<span class="hljs-keyword">this</span>, <span class="hljs-string">'constructor'</span>);
    <span class="hljs-keyword">this</span>.setId(senna.Screen.uniqueIdCounter++);
  };
  senna.inherits(senna.Screen, senna.Cacheable);

  <span class="hljs-javadoc">/**
   * <span class="hljs-javadoctag">@param</span> {*} object
   * <span class="hljs-javadoctag">@return</span> {boolean} Whether a given instance implements
   * &lt;code&gt;senna.Screen&lt;/code&gt;.
   */</span>
  senna.Screen.isImplementedBy = function(<span class="hljs-keyword">object</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">instanceof</span> <span class="hljs-title">senna</span>.<span class="hljs-title">Screen</span>;</span>
  };

  <span class="hljs-javadoc">/**
   * Holds a unique id counter for random screen names.
   * <span class="hljs-javadoctag">@type</span> {Number}
   * <span class="hljs-javadoctag">@protected</span>
   */</span>
  senna.Screen.uniqueIdCounter = +<span class="hljs-keyword">new</span> Date();

  <span class="hljs-javadoc">/**
   * Holds the screen id.
   * <span class="hljs-javadoctag">@type</span> {String}
   * <span class="hljs-javadoctag">@default</span> null
   * <span class="hljs-javadoctag">@protected</span>
   */</span>
  senna.Screen.prototype.id = <span class="hljs-keyword">null</span>;

  <span class="hljs-javadoc">/**
   * Holds the screen title. Relevant when the page title should be upadated
   * when screen is rendered.
   * <span class="hljs-javadoctag">@type</span> {?String=}
   * <span class="hljs-javadoctag">@default</span> null
   * <span class="hljs-javadoctag">@protected</span>
   */</span>
  senna.Screen.prototype.title = <span class="hljs-keyword">null</span>;

  <span class="hljs-javadoc">/**
   * Fires when the screen is active. Allows a screen to perform any setup
   * that requires its DOM to be visible. Lifecycle.
   */</span>
  senna.Screen.prototype.activate = function() {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] activate'</span>);
  };

  <span class="hljs-javadoc">/**
   * Gives the Screen a chance to cancel the navigation and stop itself from
   * being deactivated. Can be used, for example, if the screen has unsaved
   * state. Lifecycle. Clean-up should not be preformed here, since the
   * navigation may still be cancelled. Do clean-up in deactivate.
   * <span class="hljs-javadoctag">@return</span> {Boolean=} If returns true, the current screen is locked and the
   *     next navation interrupted.
   */</span>
  senna.Screen.prototype.beforeDeactivate = function() {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] beforeDeactivate'</span>);
  };

  <span class="hljs-javadoc">/**
   * Allows a screen to perform any setup immediately before the element is
   * made visible. Lifecycle.
   * <span class="hljs-javadoctag">@return</span> {?Promise=} This can return a promise, which will pause the
   *     navigation until it is resolved.
   */</span>
  senna.Screen.prototype.flip = function(surfaces) {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] flip'</span>);

    <span class="hljs-keyword">var</span> transitions = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> surfaceId in surfaces) {
      transitions.push(surfaces[surfaceId].show(<span class="hljs-keyword">this</span>.id));
    }

    <span class="hljs-keyword">return</span> senna.Promise.all(transitions);
  };

  <span class="hljs-javadoc">/**
   * Allows a screen to do any cleanup necessary after it has been
   * deactivated, for example cancelling outstanding XHRs or stopping
   * timers. Lifecycle.
   */</span>
  senna.Screen.prototype.deactivate = function() {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] deactivate'</span>);
  };

  <span class="hljs-javadoc">/**
   * Destroy a screen, either after it is deactivated (in the case of a
   * non-cacheable view) or when the App is itself disposed for whatever
   * reason. Lifecycle.
   */</span>
  senna.Screen.prototype.destroy = function() {
    senna.Screen.base(<span class="hljs-keyword">this</span>, <span class="hljs-string">'destroy'</span>);
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] destructor'</span>);
  };

  <span class="hljs-javadoc">/**
   * Gets the screen id.
   * <span class="hljs-javadoctag">@return</span> {String}
   */</span>
  senna.Screen.prototype.getId = function() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.id;
  };

  <span class="hljs-javadoc">/**
   * Returns the content for the given surface, or null if the surface isn't
   * used by this screen. This will be called when a screen is initially
   * constructed or, if a screen is non-cacheable, when navigated.
   * <span class="hljs-javadoctag">@param</span> {!String} surfaceId The id of the surface DOM element.
   * <span class="hljs-javadoctag">@param</span> {?String=} opt_contents Optional content fetch by
   *     &lt;code&gt;senna.Screen.load&lt;/code&gt;.
   * <span class="hljs-javadoctag">@return</span> {?String|Element=} This can return a string or node representing
   *     the content of the surface. If returns falsy values surface default
   *     content is restored.
   */</span>
  senna.Screen.prototype.getSurfaceContent = function() {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] getSurfaceContent'</span>);
  };

  <span class="hljs-javadoc">/**
   * Gets the screen title.
   * <span class="hljs-javadoctag">@return</span> {?String=}
   */</span>
  senna.Screen.prototype.getTitle = function() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.title;
  };

  <span class="hljs-javadoc">/**
   * Returns all contents for the surfaces. This will pass the loaded content
   * to &lt;code&gt;senna.Screen.load&lt;/code&gt; with all information you
   * need to fulfill the surfaces. Lifecycle.
   * <span class="hljs-javadoctag">@param</span> {!String=} path The requested path.
   * <span class="hljs-javadoctag">@return</span> {?String|Promise=} This can return a string representing the
   *     contents of the surfaces or a promise, which will pause the navigation
   *     until it is resolved. This is useful for loading async content.
   */</span>
  senna.Screen.prototype.load = function() {
    console.log(<span class="hljs-string">'Screen ['</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'] load'</span>);
  };

  <span class="hljs-javadoc">/**
   * Sets the screen id.
   * <span class="hljs-javadoctag">@param</span> {!String} id
   */</span>
  senna.Screen.prototype.setId = function(id) {
    <span class="hljs-keyword">this</span>.id = <span class="hljs-string">'screen_'</span> + String(id);
  };

  <span class="hljs-javadoc">/**
   * Sets the screen title.
   * <span class="hljs-javadoctag">@param</span> {?String=} title
   */</span>
  senna.Screen.prototype.setTitle = function(title) {
    <span class="hljs-keyword">this</span>.title = title;
  };

  <span class="hljs-javadoc">/**
   * <span class="hljs-javadoctag">@return</span> {String}
   */</span>
  senna.Screen.prototype.toString = function() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.id;
  };
}());
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="senna.App.html">App</a></li><li><a href="senna.Cacheable.html">Cacheable</a></li><li><a href="senna.DataAttributeHandler.html">DataAttributeHandler</a></li><li><a href="senna.EventEmitter.html">EventEmitter</a></li><li><a href="senna.HtmlScreen.html">HtmlScreen</a></li><li><a href="senna.RequestScreen.html">RequestScreen</a></li><li><a href="senna.Route.html">Route</a></li><li><a href="senna.Screen.html">Screen</a></li><li><a href="senna.Surface.html">Surface</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Tue Aug 26 2014 09:02:40 GMT-0300 (BRT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
